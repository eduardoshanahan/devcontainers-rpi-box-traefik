# User Configuration
# ==================
# These variables are REQUIRED and must be set correctly
# for the container and scripts to work properly.

# Project name used to derive container names/hostnames
# Format: lowercase letters, numbers, hyphen/underscore
PROJECT_NAME=devcontainers-rpi-box-traefik

# Workspace folder inside the container
# Default: /workspace
WORKSPACE_FOLDER=/workspace

# Host workspace helpers (optional)
# ================================
# tmux session name used by `./workspace.sh` (defaults to PROJECT_NAME if unset)
# WORKSPACE_TMUX_SESSION=${PROJECT_NAME}
#
# Optional SSH target used by `./workspace.sh` to open an ssh window
# WORKSPACE_REMOTE_HOST=
#
# Allow running `./workspace.sh` inside a container (not recommended)
# WORKSPACE_ALLOW_IN_CONTAINER=false
#
# Default host group used by `./scripts/ansible-smoke.sh` (override as needed)
# SMOKE_GROUP=raspberry_pi_boxes
#
# Retention window (days) used by `./scripts/clean-devcontainer-images.sh`
# DEVCONTAINER_IMAGE_RETENTION_DAYS=30
#
# Keep the devcontainer running after launcher scripts exit (useful for debugging)
# KEEP_CONTAINER_DEVCONTAINER=false
# KEEP_CONTAINER_CLAUDE=false
# KEEP_CONTAINER_EDITOR=false
#
# Force rebuild of the devcontainer image even when a matching tag already exists
# FORCE_REBUILD=false

# System username (must match your host system username)
# Format: lowercase letters, numbers, underscore, or hyphen
# Command to get value: echo $USER
HOST_USERNAME=your_username

# User ID (must match your host system UID)
# Format: positive integer
# Command to get value: id -u
HOST_UID=1000

# Group ID (must match your host system GID)
# Format: positive integer
# Command to get value: id -g
HOST_GID=1000

# Container Configuration
# =====================
# These variables are REQUIRED

# Container hostname (shown in prompt / used as docker hostname)
# Format: letters, numbers, and hyphens
CONTAINER_HOSTNAME_EDITOR=${PROJECT_NAME}-${EDITOR_CHOICE}
CONTAINER_HOSTNAME_DEVCONTAINER=${PROJECT_NAME}-devcontainer
CONTAINER_HOSTNAME_CLAUDE=${PROJECT_NAME}-claude
CONTAINER_HOSTNAME=${CONTAINER_HOSTNAME_EDITOR}
DEVCONTAINER_CONTEXT=devcontainer

# Container resource limits
# These control the resources allocated to the dev container

# Container memory limit
# Format: positive value with unit (e.g., 4g, 8g, 16g)
CONTAINER_MEMORY=4g

# Container CPU limit
# Format: positive number (can be decimal like 2.5)
CONTAINER_CPUS=2

# Container shared memory size
# Format: positive value with unit (e.g., 2g, 4g, 8g)
CONTAINER_SHM_SIZE=2g

# Editor choice
# Allowed values: 'code' or 'cursor'
EDITOR_CHOICE=cursor

# Git Configuration
# ===============
# Git user settings for commits (required)

# Git remote repository URL
# Format: valid git repository URL (https:// or git@)
# Example: https://github.com/username/repo.git
# Example: git@github.com:username/repo.git
GIT_REMOTE_URL="git@github.com:username/repo.git"

# Git user name
# Format: letters, numbers, spaces, dots, underscores, or hyphens
GIT_USER_NAME="Your Name"

# Git email
# Format: valid email address
GIT_USER_EMAIL="your.email@example.com"

# Git sync configuration
# ======================

# Remotes to pull from (space or comma separated). The first entry acts as the primary remote for pulls/resets.
# Example: origin lan
GIT_SYNC_REMOTES="origin"

# List of remotes to push after syncing (space/comma separated). Leave empty to skip pushes.
# Example: origin lan
GIT_SYNC_PUSH_REMOTES=""

# Remote-specific URLs used when the script needs to add a missing remote.
# Provide entries matching your remote names (uppercased, non-alphanumeric replaced with underscores).
# Example:
# GIT_REMOTE_URL_LAN=ssh://git@192.168.1.10:/volume1/git/${PROJECT_NAME}.git

# Docker Configuration
# ==================
# Docker image naming (required)

# Docker image name
# Format: lowercase letters, numbers, hyphens, underscores, or dots
DOCKER_IMAGE_NAME=${PROJECT_NAME}-${EDITOR_CHOICE}

# Docker image tag
# Format: letters, numbers, hyphens, underscores, or dots
DOCKER_IMAGE_TAG=latest

# Ansible Configuration
# =====================
# These keep tooling paths obvious and editable without digging into devcontainer.json

# Path to the Ansible config file inside the container/workspace
ANSIBLE_CONFIG=${WORKSPACE_FOLDER}/src/ansible.cfg

# Path to the default inventory file
ANSIBLE_INVENTORY=${WORKSPACE_FOLDER}/src/inventory/hosts.ini

# Additional collection search paths (project-local first, then user cache)
ANSIBLE_COLLECTIONS_PATH=${WORKSPACE_FOLDER}/src/collections:/home/${HOST_USERNAME}/.ansible/collections

# Role search path (project-local)
ANSIBLE_ROLES_PATH=${WORKSPACE_FOLDER}/src/roles

# Host variables (consumed by Ansible host_vars via env lookups)
# Ansible SSH user and key path used for host connections
ANSIBLE_USER=your_username
ANSIBLE_SSH_PRIVATE_KEY_FILE=~/.ssh/CHANGE_ME

# Name Resolution (FQDN scheme)
# =============================
# FQDN scheme: service.box.domain (ADR-0012)
#
# SITE_DOMAIN is REQUIRED (no default). Example: hhlab.home.arpa
SITE_DOMAIN=
#
# How clients are expected to resolve names:
# - hosts: /etc/hosts entries on clients
# - dns: DNS server provides records; Ansible fails fast if names don't resolve
NAME_RESOLUTION_MODE=hosts
#
# In NAME_RESOLUTION_MODE=dns, where to enforce resolution checks:
# - target: resolve from the target host
# - controller: resolve from the controller (devcontainer)
# - both: require both to resolve
DNS_PREFLIGHT_CHECK=target

# Traefik Configuration
# =====================
# Defaults for the Traefik role (override per host_vars if needed)

# Enable/disable Traefik deployment from this repo (true/false)
TRAEFIK_ENABLED=true

# Docker image to deploy
TRAEFIK_IMAGE=traefik:v3.6.6

# Traefik container name
TRAEFIK_CONTAINER_NAME=traefik

# External ports
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443
TRAEFIK_WEB_PORT=8080

# Docker network shared by all apps
TRAEFIK_DOCKER_NETWORK=web

# On-target paths
TRAEFIK_STACK_DIR=/srv/apps/traefik
TRAEFIK_CONFIG_DIR=/srv/apps/traefik/config
TRAEFIK_DATA_DIR=/srv/apps/traefik/data
TRAEFIK_CERT_DIR=/srv/apps/traefik/certs

# TLS certificate paths (wildcard)
TRAEFIK_CERT_FILE=/srv/apps/traefik/certs/home.arpa.crt
TRAEFIK_KEY_FILE=/srv/apps/traefik/certs/home.arpa.key

# Local controller path for mkcert outputs (repo-local)
TRAEFIK_LOCAL_CERT_DIR=${WORKSPACE_FOLDER}/certs

# Optional systemd autostart
TRAEFIK_SYSTEMD_AUTOSTART=false

# Traefik log level (DEBUG, INFO, WARN, ERROR)
TRAEFIK_LOG_LEVEL=INFO

# Force mkcert cert/key regeneration on each deploy (true/false)
TRAEFIK_FORCE_REGEN_CERT=false

# Override Docker API version for Traefik (set if Docker API mismatch occurs)
TRAEFIK_DOCKER_API_VERSION=1.52
TRAEFIK_DOCKER_HOST=unix:///var/run/docker.sock

# Whoami Test App Configuration
# =============================
# Minimal test workload exposed via Traefik

WHOAMI_IMAGE=traefik/whoami:v1.10.1
WHOAMI_CONTAINER_NAME=whoami
WHOAMI_PORT=80
WHOAMI_DOCKER_NETWORK=web
WHOAMI_STACK_DIR=/srv/apps/whoami
WHOAMI_VERIFY_ENABLED=true
WHOAMI_VERIFY_DELAY_SECONDS=5
WHOAMI_VERIFY_RETRIES=10
WHOAMI_VERIFY_RETRY_DELAY=3
WHOAMI_VERIFY_USE_TRAEFIK_API=true

# CA share (optional)
CA_SHARE_ENABLED=false
CA_SHARE_IMAGE=nginx:alpine
CA_SHARE_CONTAINER_NAME=ca-share
CA_SHARE_STACK_DIR=/srv/apps/ca-share
CA_SHARE_DOCKER_NETWORK=web

# Pi-hole sync (optional)
PIHOLE_SYNC_ENABLED=false
PIHOLE_PRIMARY_URL=https://pihole.rpi-box-01.hhlab.home.arpa
PIHOLE_PRIMARY_IP=https://192.168.1.58
PIHOLE_TRAEFIK_ENABLED=false
PIHOLE_SYNC_VERIFY_ENABLED=true
PIHOLE_SYNC_VERIFY_PASSWORD=

# Tooling Versions (required)
# ===========================

LOCALE=en_IE.UTF-8
PYTHON_VERSION=3.11
ANSIBLE_CORE_VERSION=2.17.*
ANSIBLE_LINT_VERSION=25.12.1
YAMLLINT_VERSION=1.35.*

# Claude CLI (optional)
# =====================
# When true, the devcontainer build downloads/installs the Claude CLI.
INSTALL_CLAUDE=false
# Optional checksum for the Claude installer script (sha256 hex); recommended if enabling INSTALL_CLAUDE.
CLAUDE_INSTALL_SHA256=

# Codex
OPENAI_API_KEY=""
